--- genostream/io_utils.py	2025-12-13 07:25:50.444858033 +0000
+++ genostream/io_utils.py	2025-12-13 07:38:57.120196957 +0000
@@ -81,6 +81,13 @@
     frame_offset: int,
     source: str = "fasta",
     min_orf_aa: int | None = None,
+    protein_strict_cds_only: bool | None = None,
+    protein_require_translation: bool | None = None,
+    protein_reject_partial: bool | None = None,
+    protein_require_start_m: bool | None = None,
+    protein_x_free: bool | None = None,
+    protein_min_aa: int | None = None,
+    protein_max_aa: int | None = None,
 ) -> str:
     """
     Encoded cache file path that avoids mixing tokenizers / window params.
@@ -103,6 +110,21 @@
         tag += f".f{int(frame_offset)}"
     if tok == "aa" and min_orf_aa is not None:
         tag += f".min{int(min_orf_aa)}"
+    if tok == "aa" and src == "genbank":
+        if protein_min_aa is not None:
+            tag += f".pmin{int(protein_min_aa)}"
+        if protein_max_aa is not None:
+            tag += f".pmax{int(protein_max_aa)}"
+        if protein_strict_cds_only:
+            tag += ".cdsonly"
+        if protein_require_translation:
+            tag += ".tronly"
+        if protein_reject_partial:
+            tag += ".nopartial"
+        if protein_require_start_m:
+            tag += ".mstart"
+        if protein_x_free:
+            tag += ".x0"
     import os
     fname = f"{accession}.{tag}.npy"
     return os.path.join(io_cfg.cache_encoded_dir, fname)
